version: "3"
services:
  clamav:
    image: nationalarchives/tdr-virus-check:dev
    build:
      context: ./virus
      args:
        - AWS_ACCESS_KEY_ID
        - AWS_SECRET_ACCESS_KEY
        - AWS_DEFAULT_REGION
        - S3_UPLOAD_BUCKET
    container_name: clamav
  siegfried:
    image: nationalarchives/tdr-file-format-check:dev
    build:
      context: ./fileformat
      args:
        - AWS_ACCESS_KEY_ID
        - AWS_SECRET_ACCESS_KEY
        - AWS_DEFAULT_REGION
        - S3_UPLOAD_BUCKET
    container_name: siegfried
  checksum:
    image: nationalarchives/tdr-checksum-check:dev
    build:
      context: ./checksum
      args:
        - AWS_ACCESS_KEY_ID
        - AWS_SECRET_ACCESS_KEY
        - AWS_DEFAULT_REGION
        - S3_UPLOAD_BUCKET
    container_name: checksum
